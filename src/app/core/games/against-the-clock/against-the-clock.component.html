<div class="title-tile">
  <div class="flex flex-col gap-1 flex-wrap">
    <span class="text-xl font-extralight">{{
      currentMap?.displayName | i18n
    }}</span>
    <span class="text-base font-thin">Against the clock</span>
  </div>
    <img *ngIf="mobileDisplay" (click)="displaySideMenu=true" src="assets/icons/open-sidemenu.svg" alt="Open sidemenu"  class="cursor-pointer">
</div>

<div class="map-tile">
  <app-map-generic
    class="map flex-grow h-full w-full"
    *ngIf="currentMap"
    [visibleBorder]="true"
    [mapId]="currentMap.id"
    [currentSelected]="currentSelected"
    [inGame]="true"
    [foundList]="foundList"
    (areaSelected)="onAreaSelected($event)"
  ></app-map-generic>
  <input title="response" [formControl]="userInput" (keyup)="onInputChange()" autofocus type="text" class="{{mobileDisplay?'outside':'inside'}}" />
</div>

<div class="progress-tile">
  <div class="flex gap-2 justify-between">
    <app-progress-bar
    [currentFound]="foundList.length"
    [objective]="originList.length"
    [progressBarWidth]="mobileDisplay?'200px':'100px'"
  ></app-progress-bar>
  <app-timer [timerDuration]="originList.length*10"></app-timer>
  </div>
</div>

<mat-accordion *ngIf="!mobileDisplay" class="miscellaneous-tile">
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title><img src="assets/icons/datalist.svg" class="mr-2" style="height: 0.75rem; filter: brightness(25);" alt=""> Résultat </mat-panel-title>
    </mat-expansion-panel-header>

    <app-data-list [originList]="originList" [foundList]="foundList" [currentSelected]="currentSelected" [inGame]="true" [maxHeight]="'10rem'" (onSelectedRow)="onSelectedRow($event)"></app-data-list>
  </mat-expansion-panel>
</mat-accordion>



<app-side-menu #app_side_menu id="sidemenu" *ngIf="mobileDisplay" [displaySideMenu]="displaySideMenu"
  (displaySideMenuChange)="displaySideMenu = !displaySideMenu" [behavior]="'fixed'" [direction]="'right'">
  <div main class="nav-container flex flex-co mt-2">
    <mat-accordion class="w-full">
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title><img src="assets/icons/datalist.svg" class="mr-2" style="height: 0.75rem; filter: brightness(25);" alt=""> Résultat </mat-panel-title>
        </mat-expansion-panel-header>

        <app-data-list [originList]="originList" [foundList]="foundList" [currentSelected]="currentSelected" [inGame]="true" [maxHeight]="'10rem'" (onSelectedRow)="onSelectedRow($event)"></app-data-list>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</app-side-menu>
